<div class="container mt-4">
  <div class="card">
    <h3 class="card-header text-center bg-dark text-white">
      Bookings Management
    </h3>
  </div>
</div>
<div class="card-body">
  <div class="container text-center">
    <div class="form-group mb-sm-2">
      <label class="sr-only"><strong>PNR : </strong></label>
      <input type="number" class="m-sm-2" #pnr style="width: 150px" />
    </div>
    <div>
      <button
        class="btn btn-secondary ms-sm-2"
        (click)="findBooking(pnr.value)"
      >
        Find my booking
      </button>
      <button class="btn btn-secondary ms-sm-2" (click)="cancel(pnr.value)">
        Cancel booking
      </button>
      <button class="btn btn-secondary ms-sm-2" (click)="getAllBookings()">
        Admin_View
      </button>
    </div>
    <div
      class="h-100 d-flex align-items-center justify-content-center text-center mt-2"
    >
      <p class="alert alert-danger" *ngIf="showErrorMessage">
        {{ message }}
      </p>
      <p class="alert alert-success" *ngIf="showSuccessMessage">
        {{ message }}
      </p>
    </div>
    <div *ngIf="showBookingDetails">
      <h3 class="mt-3">Ticket Details</h3>
      <table class="table table-bordered">
        <thead class="table-success text-center border-success">
          <tr>
            <th>PNR Number</th>
            <th>Airline Number</th>
            <th>User Name</th>
            <th>Email</th>
            <th>From</th>
            <th>To</th>
            <th>Departure</th>
            <th>Arrival</th>
            <th>Passengers Count</th>
            <th>Meal Preference</th>
          </tr>
        </thead>
        <tbody class="text-center">
          <tr>
            <td>{{ bookingdata.pnr }}</td>
            <td>{{ airlineData.airlineId }}</td>
            <td>{{ bookingdata.name }}</td>
            <td>{{ bookingdata.email }}</td>
            <td>{{ airlineData.from }}</td>
            <td>{{ airlineData.to }}</td>
            <td>{{ airlineData.departure | date: "dd-MM-yyyy hh:mm:ss" }}</td>
            <td>{{ airlineData.arrival | date: "dd-MM-yyyy hh:mm:ss" }}</td>
            <td>{{ bookingdata.noOfPassengers }}</td>
            <td>{{ bookingdata.mealPreferrence }}</td>
          </tr>
        </tbody>
      </table>
      <div
        class="row align-items-center justify-content-center"
        *ngIf="showPassengersDetails"
      >
        <h3 class="mt-3">Passengers Details</h3>
        <div class="d-flex justify-content-center">
          <table class="table table-bordered" style="width: 300px">
            <thead class="table-success text-center border-success">
              <tr>
                <th>Passenger Name</th>
                <th>Age</th>
                <th>Gender</th>
              </tr>
            </thead>
            <tbody class="text-center">
              <tr *ngFor="let passenger of passengerData">
                <td>{{ passenger.name }}</td>
                <td>{{ passenger.age }}</td>
                <td>{{ passenger.gender }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div *ngIf="showAllBookingData">
      <h3 class="mt-3">All Bookings</h3>
      <table class="table table-bordered">
        <thead class="table-success text-center border-success">
          <tr>
            <th>PNR Number</th>
            <th>Booking Number</th>
            <th>User Name</th>
            <th>Email</th>
            <th>Passengers Count</th>
            <th>Meal Preference</th>
          </tr>
        </thead>
        <tbody class="text-center">
          <tr *ngFor="let bookingdata of allbookingDetails">
            <td>{{ bookingdata.pnr }}</td>
            <td>{{ bookingdata.bookingId }}</td>
            <td>{{ bookingdata.name }}</td>
            <td>{{ bookingdata.email }}</td>
            <td>{{ bookingdata.noOfPassengers }}</td>
            <td>{{ bookingdata.mealPreferrence }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
